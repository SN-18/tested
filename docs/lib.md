&nbsp;<p><a name=top></a>
[Home](/README.md#top) :: [Tutorial]() :: [License](/LICENSE.md) :: [Issues]() &copy; 2022 Tim Menzies   
<img  src="/docs/img/banner.png">


# lib.lua

```css
```
 
Some general LUA tricks.    	
(c)2022 Tim Menzies <timm@ieee.org> BSD-2 license	
## Linting	

<dl>
<dt><b> l.rogues() &rArr;  nil </b></dt><dd>  report rogue locals </dd>
</dl>

## Maths	

<dl>
<dt><b> l.max(...) &rArr;  n </b></dt><dd>  return max </dd>
<dt><b> l.min(...) &rArr;  n </b></dt><dd>  return min </dd>
<dt><b> l.same(x, ...) &rArr;  x </b></dt><dd>  return `x` unmodified </dd>
<dt><b> l.per(t:<tt>tab</tt>, p) &rArr;  num </b></dt><dd>  return the `p`th(=.5) item of sorted list `t` </dd>
<dt><b> l.pers(t:<tt>tab</tt>, nps:<tt>{num}</tt>) &rArr;  t </b></dt><dd>  return the `nps` items of sorted list `t` </dd>
</dl>

### Random number generator	
The LUA doco says its random number generator is not stable across platforms.	
Hence, we use our own (using Park-Miller).	

<dl>
<dt><b> l.srand(n:<tt>num</tt>) &rArr;  nil </b></dt><dd>  reset random number seed (defaults to 937162211)  </dd>
<dt><b> l.rand(nlo:<tt>num</tt>, nhi:<tt>num</tt>) &rArr;  num </b></dt><dd>  return float from `nlo`..`nhi` (default 0..1) </dd>
<dt><b> l.rint(nlo:<tt>num</tt>, nhi:<tt>num</tt>) &rArr;  int </b></dt><dd>  returns integer from `nlo`..`nhi` (default 0..1) </dd>
</dl>

## Lists	

<dl>
<dt><b> l.list(t:<tt>tab</tt>) &rArr;  t </b></dt><dd>  ensure `t` has indexes `1.. size(t)` </dd>
<dt><b> l.any(t:<tt>tab</tt>) &rArr;  any </b></dt><dd>  return any item from `t`, picked at random </dd>
<dt><b> l.many(t:<tt>tab</tt>, n:<tt>num</tt>) &rArr;  t </b></dt><dd>  return `n` items from `t`, picked at random </dd>
<dt><b> l.shuffle(t:<tt>tab</tt>,    j?) &rArr;  t </b></dt><dd>   Randomly shuffle, in place, the list `t`. </dd>
<dt><b> l.copy(t:<tt>tab</tt>) &rArr;  t </b></dt><dd>  return a deep copy of `t. </dd>
<dt><b> l.push(t:<tt>tab</tt>,  x) &rArr;  any </b></dt><dd>  push `x` to end of list; return `x`  </dd>
<dt><b> l.slice(t:<tt>tab</tt>,  go,  stop:<tt>str</tt>,  inc) &rArr;  t </b></dt><dd>  return `t` from `go`(=1) to `stop`(=#t), by `inc`(=1) </dd>
</dl>

### Meta	

<dl>
<dt><b> l.kap(t:<tt>tab</tt>,  fun:<tt>fun</tt>) &rArr;  t </b></dt><dd>  map function `fun`(k,v) over list (skip nil results)  </dd>
<dt><b> l.keys(t:<tt>tab</tt>) &rArr;  t </b></dt><dd>  sort+return `t`'s keys (ignore things with leading `_`) </dd>
<dt><b> l.map(t:<tt>tab</tt>,  fun:<tt>fun</tt>) &rArr;  t </b></dt><dd>  map function `fun`(v) over list (skip nil results)  </dd>
</dl>

### Sorting Lists	

<dl>
<dt><b> l.gt(s:<tt>str</tt>) &rArr;  fun </b></dt><dd>  return a function that sorts ascending on `s'. </dd>
<dt><b> l.lt(s:<tt>str</tt>) &rArr;  fun </b></dt><dd>  return a function that sorts descending on `s`. </dd>
<dt><b> l.sort(t:<tt>tab</tt>,  fun:<tt>fun</tt>) &rArr;  t </b></dt><dd>  return `t`,  sorted by `fun` (default= `<`) </dd>
</dl>

## Coercion	
### Strings to Things	

<dl>
<dt><b> l.coerce(s:<tt>str</tt>) &rArr;  any </b></dt><dd>  return int or float or bool or string from `s` </dd>
<dt><b> l.settings(s:<tt>str</tt>) &rArr;  t </b></dt><dd>   parse help string to extract a table of options </dd>
<dt><b> l.csv(sFilename:<tt>str</tt>, fun:<tt>fun</tt>) &rArr;  nil </b></dt><dd>  call `fun` on rows (after coercing cell text) </dd>
</dl>

### Things to Strings	

<dl>
<dt><b> l.fmt(sControl:<tt>str</tt>, ...) &rArr;  str </b></dt><dd>  emulate printf </dd>
<dt><b> l.oo(t:<tt>tab</tt>) &rArr;  nil </b></dt><dd>  print `t`'s string (the one generated by `o`) </dd>
<dt><b> l.o(t:<tt>tab</tt>,   seen:<tt>str</tt>?) &rArr;  str </b></dt><dd>  table to string (recursive) </dd>
</dl>

## Objects	

<dl>
<dt><b> l.obj(s:<tt>str</tt>) &rArr;  t </b></dt><dd>  create a klass and a constructor + print method </dd>
</dl>

### Start-up stuff	

<dl>
<dt><b> l.cli(options:<tt>tab</tt>) &rArr;  t </b></dt><dd>  update key,vals in `t` from command-line flags </dd>
<dt><b> l.run1(options:<tt>tab</tt>, fun:<tt>fun</tt>) &rArr; x </b></dt><dd>  reset seed; call `fun`; afterwards, reset config </dd>
</dl>

